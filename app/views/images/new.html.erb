<h1 class="text-2xl font-semibold mb-4 text-gray-900 dark:text-white">Upload a New Image</h1>

<%= form_with model: @image, url: images_path, local: true do |form| %>
  <div class="mb-4">
    <%= form.label :file, "Choose Images", class: "block text-sm font-medium text-gray-700 dark:text-white" %>
    <div class="drag-drop-zone mt-1 p-8 text-center rounded-md cursor-pointer" 
         data-controller="drag-drop"
         data-drag-drop-target="zone">
      <div class="text-gray-500 dark:text-gray-400">
        <p>Drag and drop images here or</p>
        <%= form.file_field :files, multiple: true, accept: "image/jpeg,image/png,image/gif,image/svg+xml,image/webp", 
            capture: "filesystem", 
            class: "hidden", 
            data-drag-drop-target="input",
            data: { 
              controller: "upload",
              action: "change->upload#handleFiles"
            } %>
        <button type="button" onclick="document.getElementById('fileInput').click()" 
                class="mt-2 inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
          Browse Files
        </button>
      </div>
      <div data-drag-drop-target="list" class="mt-4 space-y-2"></div>
    </div>
    <p class="mt-1 text-sm text-gray-500 dark:text-gray-400">You can select multiple files</p>
  </div>


  <div class="mb-4">
    <%= form.label :notes, "Notes", class: "block text-sm font-medium text-gray-700 dark:text-white" %>
    <%= form.text_area :notes, class: "mt-1 block w-full border border-gray-300 dark:border-gray-700 dark:bg-gray-800 dark:text-white rounded-md shadow-sm" %>
  </div>

  <%= form.submit "Upload", class: "bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-600" %>
<% end %>
